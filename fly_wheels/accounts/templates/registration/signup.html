{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Sign Up" %} · Fly Wheels{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6 col-lg-5">
    <h2 class="mb-4 text-center">{% trans "Create your account" %}</h2>

   <form method="post" action="{% url 'signup' %}" novalidate>
    {% csrf_token %}


      {# Non-field errors #}
      {% if form.non_field_errors %}
        <div class="alert alert-danger" role="alert">
          {% for e in form.non_field_errors %}{{ e }}<br>{% endfor %}
        </div>
      {% endif %}

      {# Render fields manually instead of form.as_p to avoid invalid HTML #}
      {% for field in form %}
        <div class="mb-3">
          <label for="{{ field.id_for_label }}" class="form-label">
            {{ field.label }}
          </label>

          {# Basic input; Bootstrap class optional #}
          {{ field }}

          {# Field errors #}
          {% for e in field.errors %}
            <div class="invalid-feedback d-block">{{ e }}</div>
          {% endfor %}

          {# Help text: Django’s password validators output <ul>…</ul>. Wrap in a block element. #}
          {% if field.help_text %}
            <div id="{{ field.id_for_label }}_help" class="form-text">
              {{ field.help_text|safe }}
            </div>
          {% endif %}
        </div>
      {% endfor %}

      <button class="btn btn-primary w-100" type="submit">{% trans "Sign Up" %}</button>

      <p class="mt-3 mb-0 text-center">
        {% blocktrans %}Already have an account?{% endblocktrans %}
        <a href="{% url 'login' %}">{% trans "Log in" %}</a>
      </p>
    </form>
  </div>
</div>
{% endblock %}
